<style>
h2:hover {
    background: #006080;
}
h3 {
    color: #004d66;
    margin-top: 1em;
}
ul {
    list-style-type: disc;
    padding-left: 20px;
}
li {
    margin-bottom: 5px;
}
.restaurant {
    margin-bottom: 40px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}
.menu-content {
    display: none;
    margin-top: 10px;
}
.button-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
    margin-bottom: 20px;
}
.weekday-button {
    display: block;
    text-align: center;
    background: #004d66;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    text-decoration: none;
    font-weight: bold;
    transition: background 0.2s ease;
}
.weekday-button:hover {
    background: #006080;
}
</style>

<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>Dagens lunch – {{ day.capitalize() }}</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f8f8; padding: 20px; }
        h1 { color: #004d66; }
        h2 {
            background: #004d66; color: white; padding: 10px; border-radius: 4px;
            cursor: pointer; user-select: none;
            text-align: center; margin-top: 20px;
        }
        h2:hover { background: #006080; }
        h3 { color: #004d66; margin-top: 1em; }
        ul { list-style-type: disc; padding-left: 20px; }
        li { margin-bottom: 5px; }
        .restaurant {
            margin-bottom: 40px; padding: 20px; background: white;
            border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        .menu-content { display: none; margin-top: 10px; }
    </style>
    <script>
        function toggleVisibility(id) {
            const el = document.getElementById(id);
            if (!el) return;
            const current = window.getComputedStyle(el).display;
            el.style.display = (current === 'none') ? 'block' : 'none';
        }

        window.addEventListener("DOMContentLoaded", function () {
            const hash = window.location.hash;
            if (hash) {
                const readableId = hash.slice(1);  // e.g. "Kooperativet"
                const contentId = readableId + "_menu";

                const menuContent = document.getElementById(contentId);
                const targetSection = document.getElementById(readableId);

                if (menuContent) {
                    // Expand first
                    menuContent.style.display = "block";

                    // Scroll after layout updates
                    requestAnimationFrame(() => {
                        targetSection?.scrollIntoView({ behavior: "smooth" });
                    });
                }
            }
        });
    </script>
</head>
<body>
    <h1>Dagens lunch på Lindholmen – {{ day.capitalize() }}</h1>

    <div style="margin-top: 40px; font-size: 14px; color: #666;">
        <p>Last updated: {{ last_updated }}</p>
    </div>
    <a class="weekday-button" href="index.html">← Tillbaka till veckomeny</a>
    <hr>

    <div class="toc">
        <h2>Restauranger</h2>
        <div class="button-container">
            {% for scraper_name in lunch_data.keys()|sort %}
                {% set readable = scraper_name.replace('Scraper', '') %}
                <a class="weekday-button" href="#{{ readable }}">{{ readable }}</a>
            {% endfor %}
        </div>
    </div>
    <hr>
        {% for restaurant, data in lunch_data.items() | sort %}
            {% set readable = restaurant.replace('Scraper', '') %}
            {% set div_id = readable ~ '_menu' %}
            <div class="restaurant" id="{{ readable }}">
                <h2 onclick="toggleVisibility('{{ div_id }}')">{{ readable }}</h2>
                <div class="menu-content" id="{{ div_id }}">
                {% set categories = {} %}
                {% for item in data["items"] %}
                    {% set category = item.category or 'Dagens' %}
                    {% if category not in categories %}
                        {% set _ = categories.update({category: []}) %}
                    {% endif %}
                    {% set _ = categories[category].append(item) %}
                {% endfor %}

                {% for cat, items in categories.items() %}
                    <h3>{{ cat }}</h3>
                    <ul>
                    {% for item in items %}
                        <li>
                            <strong>{{ item.name }}</strong>
                            {% if item.description %} – {{ item.description }}{% endif %}
                        </li>
                    {% endfor %}
                    </ul>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
    <hr>
    <a class="weekday-button" href="index.html">← Tillbaka till veckomeny</a>

</body>
</html>
